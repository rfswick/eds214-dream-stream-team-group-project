---
title: "Luquillo Stream Data"
format: html
execute:
  warning: false
editor_options: 
  chunk_output_type: console
---

```{r}
library(tidyverse)
library(janitor)
library(plyr)
library(lubridate)
library(patchwork)
```

```{r}
# read in data and clean NAs
# clean names to lower snake case
dream_stream_team_path = "/courses/EDS214/group_project/2024/dream_stream_team/raw_data"

Q1 <- read_csv(file.path(dream_stream_team_path, "QuebradaCuenca1-Bisley.csv"), na = "-9999") %>% 
  clean_names() |>
  mutate(date = mdy(sample_date))

Q2 <- read_csv(file.path(dream_stream_team_path, "QuebradaCuenca2-Bisley.csv"), na = "-9999") %>% 
  clean_names() |>
  mutate(sample_date = str_replace(sample_date,
                                   pattern = " 0:00",
                                   replacement = "")) |>
  mutate(date = mdy(sample_date))

Q3 <- read_csv(file.path(dream_stream_team_path, "QuebradaCuenca3-Bisley.csv"), na = "-9999") %>% 
  clean_names() |>
  mutate(date = mdy(sample_date))

PRM <- read_csv(file.path(dream_stream_team_path, "RioMameyesPuenteRoto.csv"), na = "-9999") %>% 
  clean_names() |>
  mutate(date = mdy(sample_date))
```

```{r}
# combine all datasets using fulljoin 
all_data <- join_all(list(Q1, Q2, Q3, PRM), by = 'sample_id', type = 'full')


```


```{r}
# select()
# k, no3, date, sample_id

data_sub <- all_data %>% 
  select(sample_id, date, k, no3) %>% 
  filter(date >= "1988-01-01" & date <= "1994-12-31")
```

```{r}
# plotting this shit

# maybe use scale_y_continuous() to deal with the outlier problem, or maybe not

# k plot
k_plot <- ggplot(data_sub, aes(x = date, y = k, color = sample_id)) + 
  geom_line(linewidth = 0.5) + 
  labs(title = "k plot")

# no3 plot
no3_plot <- ggplot(data_sub, aes(x = date, y = no3, color = sample_id)) + 
  geom_line(linewidth = 0.5) + 
  labs(title = "no3 plot")
```

```{r}
# facet it

k_plot / no3_plot
```












